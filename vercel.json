{
  "version": 2,
  "functions": {
    "api/**/*.py": {
      "excludeFiles": "**/{node_modules,frontend,backend,dist,docs,tests,.cache,.npm,venv,__pycache__}/**"
    }
  },
  "rewrites": [
    { "source": "/api/scan-file", "destination": "/api/scan_file" },
    { "source": "/api/(.*)", "destination": "/api/$1" }
  ],
  "buildCommand": "npm --prefix frontend install && npm --prefix frontend run build && node -e \"const fs=require('fs'); try { fs.rmSync('frontend/node_modules',{recursive:true,force:true}); } catch {}\"",
  "outputDirectory": "frontend/dist"
}
